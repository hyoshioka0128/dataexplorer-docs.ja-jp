---
title: ストリーミング インジェスト ポリシー - Azure データ エクスプローラー |マイクロソフトドキュメント
description: この記事では、Azure データ エクスプローラーでのストリーミング インジェスト ポリシーについて説明します。
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/20/2020
ms.openlocfilehash: ef4199e0cd8c1e14839e5508a9c6a0d793de0cc0
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/15/2020
ms.locfileid: "81519603"
---
# <a name="streaming-ingestion-policy"></a>ストリーミング インジェスト ポリシー

## <a name="streaming-ingestion-target-scenario"></a>ストリーミング インジェスト ターゲットのシナリオ

ストリーミング インジェストは、多様なボリューム データでインジェスト時間が 10 秒未満の低待機時間を必要とするシナリオを対象とします。 1 つ以上のデータベースで、各テーブルへのデータ ストリームが比較的小さい (1 秒あたりのレコード数が少ない) が、全体的なデータインジェスト量が多い (1 秒あたり数千レコード) 場合、多数のテーブルの運用処理を最適化するために使用されます。

データ量がテーブルごとに 1 MB/秒を超える場合は、ストリーミング インジェストではなく、従来の (一括) インジェストを使用します。 

* この機能を実装する方法については、「[ストリーミング インジェスト](https://docs.microsoft.com/azure/data-explorer/ingest-data-streaming)」を参照してください。
* ストリーミング インジェスト制御コマンドの詳細については、「ストリーミング イン[ジェスト ポリシーの管理に使用されるコントロール コマンド」を](../management/streamingingestion-policy.md)参照してください。

## <a name="streaming-ingestion-policy-definition"></a>ストリーミング インジェスト ポリシーの定義

ストリーミング インジェスト ポリシーは、テーブルまたはデータベースで定義できます。 このポリシーをデータベース レベルで定義すると、データベース内のすべての既存テーブルおよび将来のテーブルに同じ設定が適用されます。 ストリーミング インジェスト ポリシーがテーブル レベルとデータベース レベルの両方で設定されている場合、テーブル レベルの設定が優先されます。

> [!NOTE]
> テーブルがストリーミング インジェストを直接取得せず、更新ポリシーを介してのみ取得する場合、このテーブルでストリーミング インジェスト ポリシーを定義する必要はありません。 

ストリーミング インジェスト ポリシーでは、テーブルのストリーミング データが配信される行ストアの最大数を設定します。 可用性とデータレートの両方のサポートには、分散が必要です。

## <a name="setting-the-number-of-row-stores"></a>行ストアの数の設定

ストリーミング インジェスト ポリシーで設定された行ストアの数を定義する必要があります。 この数値は、テーブルごとのストリーミング データ レートに基づいて行う必要があります (大まかな推定値で十分です)。
任意のテーブルの行ストアの推奨最小数は 4 です。 サポートされる行ストアの最大数は 64 です。
テーブルのストリーミング データ レートが高いほど、関連付けられたストリーミング インジェスト ポリシーに必要な行ストアの数が多くなります。
推奨設定については、次の表を使用してください (使用する数が少なければ問題がある場合)。

|推定ピーク時のストリーミング データ レート (テーブルごと)|行ストアの数|
|----------|------|
|< 1 Gb/時 |4|
|1 - 2 GB/時間 |4-8|
|2 - 3 GB/時間 |8-12|
|3 - 4 GB/時間 |12-16|
| > 4 GB/時間 |

 これに関するさらなるアドバイスについては、[サポートチケット](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview)を開きます

クエリの待機時間を最適にするため、テーブルごとに定義される行ストアの数が、上記の推奨値を大幅に超えないようにしてください。

> [!NOTE]
> データベースのストリーミング インジェスト ポリシーを設定する場合は、最も高いデータ レートを持つテーブルに必要な行ストアの数を割り当てます。 