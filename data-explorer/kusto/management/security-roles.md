---
title: セキュリティ ロールの管理 - Azure データ エクスプローラー |マイクロソフトドキュメント
description: この記事では、Azure データ エクスプローラーでのセキュリティ ロールの管理について説明します。
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: ea56911ff2ad320d1070da2a4b92d94f060273cf
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/15/2020
ms.locfileid: "81520096"
---
# <a name="security-roles-management"></a>セキュリティ ロールの管理

> [!IMPORTANT]
> Kusto クラスターの承認規則を変更する前に、以下を読んでください: [Kusto アクセス制御の概要](../management/access-control/index.md) 
> [ロールベースの権限](../management/access-control/role-based-authorization.md) 

この資料では、セキュリティ ロールの管理に使用する制御コマンドについて説明します。
セキュリティ ロールは、セキュリティで保護されたリソース (データベースやテーブルなど) に対して操作する権限を持つセキュリティ プリンシパル (ユーザーとアプリケーション) と、許可される操作を定義します。 たとえば、特定のデータベースのセキュリティ`database viewer`ロールを持つプリンシパルは、そのデータベースのすべてのエンティティ (制限付きテーブルを除く) を照会および表示できます。

セキュリティ ロールは、セキュリティ プリンシパルまたはセキュリティ グループ (他のセキュリティ プリンシパルまたは他のセキュリティ グループを持つことができます) に関連付けることができます。 セキュリティ プリンシパルがセキュリティ保護されたリソースに対して操作を行おうとすると、システムは、リソースに対してこの操作を実行するアクセス許可を与える少なくとも 1 つのセキュリティ ロールにプリンシパルが関連付けられているかどうかを確認します。 これを**承認チェック**と呼ばれます。 許可チェックに失敗すると、操作が中止されます。

**構文**

セキュリティ ロール管理コマンドの構文:

*動詞**セキュリティで保護可能なオブジェクト型**セキュリティで保護可能なオブジェクト名**ロール*[`(` *リストのプリンシパル ]* `)` *説明*] ]

* *動詞*`.show`は、`.add`実行するアクションの種類`.drop`を示します`.set`。

    |*動詞* |説明                                  |
    |-------|---------------------------------------------|
    |`.show`|現在の値を返します。         |
    |`.add` |ロールに 1 つ以上のプリンシパルを追加します。     |
    |`.drop`|ロールから 1 つ以上のプリンシパルを削除します。|
    |`.set` |ロールをプリンシパルの特定のリストに設定し、以前のプリンシパルをすべて削除します (存在する場合)。|

* *ロール*が指定されているオブジェクトの種類です。

    |*セキュリティで保護可能なオブジェクトの種類*|説明|
    |---------------------|-----------|
    |`database`|指定されたデータベース|
    |`table`|指定されたテーブル|

* *オブジェクト名*は、オブジェクトの名前です。

* *ロール*は、関連するロールの名前です。

    |*ロール*      |説明|
    |------------|-----------|
    |`principals`|`.show`動詞の一部としてのみ表示できます。は、セキュリティ保護可能なオブジェクトに影響を与えるプリンシパルの一覧を返します。|
    |`admins`    |オブジェクトとすべてのサブオブジェクトを表示、変更、削除する機能など、セキュリティ保護可能なオブジェクトを制御できます。|
    |`users`     |セキュリティ保護可能なオブジェクトを表示し、その下に新しいオブジェクトを作成できます。|
    |`viewers`   |セキュリティ保護可能なオブジェクトを表示できます。|
    |`unrestrictedviewers`|データベース レベルでのみ、制限されたテーブル (「通常」と`viewers``users`) の表示が許可されます。|
    |`ingestors` |データベース レベルでのみ、すべてのテーブルへのデータ取り込みが許可されます。|
    |`monitors`  ||

* *リストオブプリンシパル*は、オプションのコンマ区切りのセキュリティ プリンシパル識別子 (型`string`の値) のリストです。

* *説明*は、将来の監査のために`string`、関連付けと共に格納される型のオプション値です。

## <a name="example"></a>例

次の control コマンドは、データベース内のテーブル`StormEvents`にアクセスできるすべてのセキュリティ プリンシパルを一覧表示します。

```kusto
.show table StormEvents principals
```

このコマンドの潜在的な結果を次に示します。

|Role |プリンシパルタイプ |プリンシパル表示名 |プリンシパルオブジェクトId |プリンシパルFQN 
|---|---|---|---|---
|データベース管理者 |AAD ユーザー |マーク・スミス |cd709aed-a26c-e3953dec735e |aaduser=msmith@fabrikam.com|





## <a name="managing-database-security-roles"></a>データベース セキュリティ ロールの管理

`.set``database`*データベース名**ロール*`none``skip-results`[ ]

`.set``database`*データベース名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.add``database`*データベース名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.drop``database`*データベース名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

最初のコマンドは、ロールからすべてのプリンシパルを削除します。 2 つ目は、ロールからすべてのプリンシパルを削除し、新しいプリンシパル セットを設定します。 3 つ目は、既存のプリンシパルを削除せずに、新しいプリンシパルをロールに追加します。 最後の場合は、示されたプリンシパルをロールから削除し、他のプリンシパルを保持します。

各値の説明:

* *データベース名*は、セキュリティ ロールが変更されるデータベースの名前です。

* *役割*は、 `admins` `ingestors`、 `monitors` `unrestrictedviewers`、 `users`、 `viewers`、 、 、 、 のいずれかです。

* *プリンシパル*は 1 つ以上のプリンシパルです。 これらの[プリンシパルを指定する方法については、プリンシパルと ID プロバイダー](./access-control/principals-and-identity-providers.md)を参照してください。

* `skip-results`を指定した場合、コマンドは更新されたデータベース プリンシパルの一覧を返さないことを要求します。

* *説明*(指定されている場合) は、変更に関連付けられており、対応する`.show`コマンドによって取得されるテキストです。

<!-- TODO: Need more examples for the public syntax. Until then we're keeping this internal -->


## <a name="managing-table-security-roles"></a>テーブル セキュリティ ロールの管理

`.set``table`*テーブル名**の役割*`none`[`skip-results`]

`.set``table`*テーブル名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.add``table`*テーブル名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.drop``table`*テーブル名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

最初のコマンドは、ロールからすべてのプリンシパルを削除します。 2 つ目は、ロールからすべてのプリンシパルを削除し、新しいプリンシパル セットを設定します。 3 つ目は、既存のプリンシパルを削除せずに、新しいプリンシパルをロールに追加します。 最後の場合は、示されたプリンシパルをロールから削除し、他のプリンシパルを保持します。

各値の説明:

* *TableName*は、セキュリティ ロールが変更されるテーブルの名前です。

* *役割*は、 `admins` `ingestors`または です。

* *プリンシパル*は 1 つ以上のプリンシパルです。 これらの[プリンシパルを指定する方法については、プリンシパルと ID プロバイダー](./access-control/principals-and-identity-providers.md)を参照してください。

* `skip-results`を指定した場合、コマンドは更新されたテーブル プリンシパルの一覧を返さないことを要求します。

* *説明*(指定されている場合) は、変更に関連付けられており、対応する`.show`コマンドによって取得されるテキストです。

**例**

```kusto
.add table Test admins ('aaduser=imike@fabrikam.com ')
```

## <a name="managing-function-security-roles"></a>機能セキュリティ ロールの管理

`.set``function`*関数名**ロール*`none``skip-results`[ ]

`.set``function`*関数名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.add``function`*関数名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

`.drop``function`*関数名**ロール*`(``,`*プリンシパル*[*プリンシパル*..]`)` [`skip-results`] [*説明*]

最初のコマンドは、ロールからすべてのプリンシパルを削除します。 2 つ目は、ロールからすべてのプリンシパルを削除し、新しいプリンシパル セットを設定します。 3 つ目は、既存のプリンシパルを削除せずに、新しいプリンシパルをロールに追加します。 最後の場合は、示されたプリンシパルをロールから削除し、他のプリンシパルを保持します。

各値の説明:

* *FunctionName*は、セキュリティ ロールが変更される関数の名前です。

* *ロール*は常`admin`に .

* *プリンシパル*は 1 つ以上のプリンシパルです。 これらの[プリンシパルを指定する方法については、プリンシパルと ID プロバイダー](./access-control/principals-and-identity-providers.md)を参照してください。

* `skip-results`が指定された場合、コマンドは更新された関数プリンシパルのリストを返さないことを要求します。

* *説明*(指定されている場合) は、変更に関連付けられており、対応する`.show`コマンドによって取得されるテキストです。

**例**

```kusto
.add function MyFunction admins ('aaduser=imike@fabrikam.com') 'This user should have access'
```

