---
title: クエリ/管理 HTTP 応答 - Azure データ エクスプローラー |マイクロソフトドキュメント
description: この記事では、Azure データ エクスプローラーでのクエリ/管理 HTTP 応答について説明します。
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 11/05/2018
ms.openlocfilehash: 13937bbc9d17ed570c40926497ccf9b5c942fe72
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/15/2020
ms.locfileid: "81503079"
---
# <a name="querymanagement-http-response"></a>クエリ/管理の HTTP 応答

## <a name="response-status"></a>応答ステータス

HTTP 応答のステータス行は、HTTP 標準応答コードに従います (例えば、200 は成功を示します)。 現在、次の状態コードが使用されています (ただし、有効な HTTP コードが返される可能性があります)。

|コード|サブコード       |説明                                    |
|----|---------------|-----------------------------------------------|
|100 |Continue       |クライアントは引き続き要求を送信できます。       |
|200 |[OK]             |要求の処理が正常に開始されました。       |
|400 |BadRequest     |要求の形式が正しくないし、失敗した (永続的に) 。|
|401 |権限がありません   |クライアントは最初に認証する必要があります。            |
|403 |Forbidden      |クライアント要求が拒否されました。                      |
|404 |NotFound       |要求は、存在しないエンティティを参照します。      |
|413 |ペイロードは大きすぎます|要求ペイロードが制限を超えました。               |
|429 |TooManyRequests|調整のため要求が拒否されました。     |
|504 |タイムアウト        |要求がタイムアウトしました。                         |
|520 |ServiceError   |サービスで要求の処理中にエラーが発生しました。|

> [!NOTE]
> 200 ステータス コードは、要求処理が正常に開始されたことを表し、正常に完了していないことを認識することが重要です。 要求処理中に発生した 200 の後に発生したエラーは"部分クエリ失敗"と呼ばれ、発生した場合は、特別なインジケータが応答ストリームに挿入され、クライアントに発生したことを警告します。

## <a name="response-headers"></a>応答ヘッダー

次のカスタム ヘッダーが返されます。

|カスタム ヘッダー           |説明                                                                                               |
|------------------------|----------------------------------------------------------------------------------------------------------|
|`x-ms-client-request-id`|同じ名前の要求ヘッダーで送信された一意の要求識別子、または一意の識別子。     |
|`x-ms-activity-id`      |(サービスによって作成された) 要求のグローバル一意の相関識別子。                        |

## <a name="response-body"></a>応答本文

状態コードが 200 の場合、応答本文は、クエリまたはコントロール コマンドの結果を四角形テーブルのシーケンスとしてエンコードする JSON ドキュメントです。
詳細については、以下をご覧ください。

> [!NOTE]
> この一連のテーブルは、SDK によって反映されます。 たとえば、.NET Framework Kusto.Data ライブラリを使用する場合、テーブルのシーケンスは、SDK`System.Data.IDataReader`によって返されるオブジェクトの結果になります。

状態コードが 4xx または 5xx エラー (401 以外) を示している場合、応答本文は[Microsoft REST API ガイドライン](https://github.com/microsoft/api-guidelines)に準拠して、失敗の詳細をエンコードする JSON ドキュメントです。

> [!NOTE]
> ヘッダーが`Accept`要求に含まれていない場合、失敗の応答本文は必ずしも JSON ドキュメントではありません。

## <a name="json-encoding-of-a-sequence-of-tables"></a>テーブルのシーケンスの JSON エンコーディング

テーブルのシーケンスの JSON エンコーディングは、次の名前と値のペアを持つ単一の JSON プロパティ バッグです。

|名前  |値                              |
|------|-----------------------------------|
|テーブル|Table プロパティ バッグの配列。|

Table プロパティ バッグには、次の名前と値のペアがあります。

|名前     |値                               |
|---------|------------------------------------|
|TableName|テーブルを識別する文字列。 |
|[列]  |Column プロパティ バッグの配列。|
|[行]     |行配列の配列。          |

Column プロパティ バッグには、次の名前と値のペアがあります。

|名前      |値                                                          |
|----------|---------------------------------------------------------------|
|ColumnName|列を識別する文字列。                           |
|DataType  |列のおおよその .NET 型を提供する文字列。|
|[列の型]|列の[スカラー データ型](../../query/scalar-data-types/index.md)を提供する文字列。|

行配列は、それぞれの列配列と同じ順序で、関連する列の行の値を持つ 1 つの要素を持ちます。
JSON で表現できないスカラーデータ型`datetime
and `(timespan など) は、JSON 文字列として表されます。

次の例は、型`Table_0``Text``string`の単一列と 1 行を保持する 1 つのテーブルを保持するオブジェクトを示しています。

```json
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
```

別のエキメイプル:

![JSON 応答表現](../images/rest-json-representation.png "残りの json 表現")

## <a name="the-meaning-of-tables-in-the-response"></a>応答内のテーブルの意味

ほとんどの場合、制御コマンドは、制御コマンドによって生成された情報を保持する単一の表で結果を返します。 たとえば、このコマンド`.show databases`は、クラスタ内のすべてのアクセス可能なデータベースの詳細を含む単一のテーブルを返します。

一方、クエリは、一般的に複数のテーブルを返します。 [各表形式の式ステートメント](../../query/tabularexpressionstatements.md)に対して、ステートメントによって生成された結果を表す 1 つ以上のテーブルが順番に出力されます ([バッチ](../../query/batches.md)演算子と[fork 演算子](../../query/forkoperator.md)により、このようなテーブルが複数存在する場合があります ) 。

さらに、通常は 3 つのテーブルが生成されます。

* クライアント@ExtendedPropertiesの視覚化命令 ([たとえば、render オペレータ](../../query/renderoperator.md)の情報を反映するために出力される) や[データベース カーソル](../../management/databasecursor.md)情報などの追加の値を提供するテーブル。
* QueryStatus テーブルは、クエリ自体の実行に関する追加情報 (クエリが正常に完了したかどうか、クエリによって消費されたリソースなど) を提供します。
* 最後に出力され、結果の他のテーブルを一覧表示する TableOfContents テーブル。

